#  Настройка MySQL
После установки пакета MySQL нужно создать базу данных mysql. Возможно, она уже создана, но, чтобы убедиться в этом, введите команду:

mysql_install_db

Если база данных существует, то программа сообщит вам об этом. Теперь нужно установить пароль для пользователя root. По умолчанию пользователь root не имеет пароля. Поэтому очень важно задать пароль для root.

База данных mysql является системной базой данных и содержит следующие таблицы:

- таблицу db;
- таблицу host;
- таблицу user.

Сейчас нас интересует таблица user. Она содержит пароли всех пользователей, которые имеют право работать с сервером MySQL. На данном (начальном) этапе в базу данных внесен только один пользователь - root. Для изменения пароля запустите сервер командой:

  mysql_secure_installation

Если вы забудете пароль, вы его уже не восстановите. Единственный выход из такого возможного неблагоприятного положения - создание базы данных mysql заново командой mysql_install_db, предварительно удалив старую базу.

Теперь вы уже не можете зарегистрироваться на сервере без пароля. Если вы введете команду mysql -u root mysql, то получите такое сообщение:

  ERROR: Access dinied for user: 'riit@localhost' (Using password: NO)

Для регистрации на сервере теперь нужно использовать команду mysql -u root -p. Параметр -p запросит пароль при регистрации.

В своей работе демон mysqld использует файл журнала /var/log/mysql.log. Именно внего заносятся все транзакции, а также все команды, которые ввел пользователь. После установки сервера нужно внести пользователей, которые имеют право работать с сервером баз данных. Введите следующий запрос:

  mysql>GRANT ALL PRIVILEGES ON *.* TO admin@localhost IDENTIFIED BY 'password'
  WITH GRANT OPTION;

Введенный вами запрос создает пользователя admin, который будет иметь право выполнять любые операции со всеми базами данных. Данный пользователь будет иметь право подключаться к серверу с компьютера localhost, используя пароль 'password'.

Маска *.* определяет, к каким базам данных и таблицам имеет право подключаться тот или иной пользователь. Первая звездочка определяет базу, а вторая - таблицу. Если вам нужно, чтобы пользователь admin имел право подключаться с любого хоста, используйте знак процента вместо имени хоста, в этом случае запрос будет выглядеть так:

  mysql>GRANT ALL PRIVILEGES ON *.* TO admin@"%" IDENTIFIED BY 'password'
  WITH GRANT OPTION;

Вместо всех полномочий вы можете определить, какие действия может выполнять с базой тот или иной пользователь. Если вы являетесь хостинг-провайдером и предоставляете доступ пользователю к его базе данных, то вы можете использовать следующий запрос:

  GRANT CREATE,DROP,SELECT,INSERT,UPDATE,DELETE,INDEX ON user.* TO user% IDENTIFIED
  BY 'user_password';

Перед выполнением данного запроса необходимо создать базу данных user (если она не была создана). Данный запрос позволяет пользователю user выполнять все операции с его базой данных.

Приведем полный список соответствующих полномочий:
Полномочия пользователей сервера MySQL
^ Полномочия ^	  Описание     ^
|SELECT, INSERT, UPDATE, DELETE 	|Одноименные операции с данными: пользователь имеет право просматривать, добавлять, модифицировать, удалять данные в таблицах базы данных|
|INDEX 	|Пользователь имеет право производить операции с индексами таблиц|
|REFERENCES 	|Пользователь имеет право работать со ссылками в базах данных и таблицах|
|CREATE, DROP 	|Создание и удаление таблиц и баз данных|
|GRANT, ALTER 	|Операции с полномочиями|
|RELOAD, SHUTDOWN, PROCESS 	|Пользователь имеет право перезагружать, останавливать сервер и просматривать все процессы (подключения)|

Если запрос GRANT у вас не работает, то вы можете внести пользователя непосредственно в таблицу user базы данных mysql. Структура таблицы user выглядит следующим образом:

  Host User Password Select_priv Insert_priv Update_priv Delete_priv Create_priv Drop_priv
  Reload_priv Shutdown_priv Process_priv File_priv

Поля Host, User, Password - это, соответственно, узел, из которого пользователь может получить доступ, имя пользователя, пароль пользователя. Все остальные поля задают полномочия для пользователя. Если выполнение какой-либо операции разрешено пользователю, соответствующее поле должно быть раным "Y". В противном случае установите значение "N".

Например, нам нужно создать пользователя admin, который должен иметь все полномочия. Это можно сделать с помощтю такого запроса SQL:

  INSERT INTO user (Host, User, Password, Select_priv, Insert_priv, Update_priv, Delete_priv,
  Create_priv, Drop_priv, Reload_priv, Shutdown_priv, Process_priv, File_priv) VALUES
  ('localhost', 'admin', password ('topsecret'),
  'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y');

При вводе запроса обращайте внимание на регистр названий полей. Сервер MySQL различает прописные и строчные буквы! С помощью вышеприведенного запроса был создан пользователь admin, который имеет право регистрироваться на сервере только из узла localhost. Если вам нужно разрешить регистрацию из любого узла сети, используйте знак процента, однако это не совсем корректно с точки зрения безопасности. Пользователь admin обладает всеми возможными привелегиями. Пароль пользователя - topsecret.

Для создания обыкновенного пользователя используйте следующий запрос:

  INSERT INTO user (Host, User, Password, Select_priv, Insert_priv, Update_priv, Delete_priv)
  VALUES ('%', 'user', password('topsecret'), 'Y', 'Y', 'Y', 'Y');