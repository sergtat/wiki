# Vue.js 2: Webpack и vue-файлы с разными типами содержимого.
Vue-файлы отлично подходят для создания однофайловых компонентов. Одна из киллер-фич vue-файлов — возможность использовать любой тип содержимого при описании. Хочется использовать SASS в стилях? Пожалуйста. Шаблонизатор вместо HTML? Тоже можно. Писать на TypeScript? Легко! А с новыми loader’ами для Webpack можно хоть на ELM попробовать писать.

Самая интересная и не самая очевидная в настройке возможность, которую разберём в этой статье.

## Из чего состоят vue-файлы

Каждый файл состоит из 3 корневых блоков:

- шаблон компонента
- скрипты с логикой работы
- стили

_Кстати, если тег `template` и `script` может быть только один в файле, то тегов `style` несколько — например, если потребуются глобальные стили и стили только для данного модуля._

По умолчанию, в секциях HTML, JS (ES2015) и CSS. Нестандартный тип содержимого нужно указывать с помощью атрибута `lang`:

```html
// vue-файл

<!-- Шаблон в jade -->
<template lang="jade">
  ...
</template>

<!-- CoffeeScript в скриптах -->
<script lang="coffee">
  ...
</script>

<!-- SASS в стилях -->
<style lang="scss">
  ...
</style>
```

Для красивой подсветки кода в секциях может потребоваться установить плагин для редактора (например, Sublime Text, Atom).

Секции однофайлового компонента не обязательно располагать в одном vue-файле. При желании все или некоторые части можно вынести в отдельные файлы и подключать с помощью атрибута src:

```html
// vue-файл состоящий из подключений других файлов

<template src="./template.html"></template>
<style src="./style.css"></style>
<script src="./script.js"></script>
```

С содержимым вроде разобрались, как же подключать vue-файлы?

## Настройка Webpack & vue-loader

Устанавливаем Webpack и vue-loader.

Вообще для любого типа содержимого, который будет обрабатывать Webpack потребуется установить соответствующий loader:

- [список loader’ов на старом сайте Webpack](https://webpack.github.io/docs/list-of-loaders.html)
- [список loader’ов на новом сайте Webpack](https://webpack.js.org/loaders/https://webpack.js.org/loaders/)

В конфиг Webpack добавляем правило обработки vue-файлов с помощью vue-loader:

```javascript
// webpack.config.js

...
rules: [
    ...
    {
        test: /\.vue$/,
        loader: 'vue-loader',
    }
    ...
]
...
```

Рекомендуется ограничивать область действия правил свойствами include или exclude. Стоит не забывать про эту рекомендацию. Но если потребуется использовать сторонние компоненты в виде vue-файлов, нужно чтобы это правило позволяло обрабатывать файлы из каталога node_modules.

## Настройка нестандартного содержимого vue-файлов

Больше всего непонимания у меня возникло именно с этой частью. Оказалось, что решается проблема очень просто — в vue-loader нужно передавать цепочки loader’ов для каждого нестандартного типа:

```javascript
// Webpack 1
// webpack.config.js
...

module: {
    loaders: [...]
},

// Цепочки loader'ов, используемые в vue-файлах
vue: {
  loaders: {
    scss: 'style!css!sass'
  }
}

...
```

В результате при обработке секции с `lang=”scss”` в однофайловом компоненте будет использована цепочка из `sass-loader`, `css-loader` и `style-loader`.

В Webpack 2 ситуация немного изменилась. В конфиг больше нельзя добавлять свои секции — теперь для передачи необходимых настроек следует использовать плагин `LoaderOptionsPlugin`:

```javascript
// Webpack 2
// webpack.config.js
...

module: {
    rules: [...]
},

plugins: [
  ...
  new webpack.LoaderOptionsPlugin({
   vue: {
    loaders: {
     scss: 'style!css!sass'
    }
   }
  })
  ...
]

...
```

Всё! Теперь vue-loader будет передавать правильные цепочки loader’ов Webpack’у, который в свою очередь соберёт их в javascript-модули.

**Источник**: https://medium.com
